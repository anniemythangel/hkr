/* Responsive overrides gated by ENABLE_RESPONSIVE_UI (.is-responsive-enabled) */

.is-responsive-enabled .table-layout,
.is-responsive-enabled .table-layout-stage,
.is-responsive-enabled .table-ring,
.is-responsive-enabled .table-ring-grid,
.is-responsive-enabled .table-stage-panel,
.is-responsive-enabled .table-stage-panel > *,
.is-responsive-enabled .table-ring-center,
.is-responsive-enabled .table-seat,
.is-responsive-enabled .player-hand-rail,
.is-responsive-enabled .player-hand-wrap {
  min-width: 0;
}

.is-responsive-enabled .table-stage-panel {
  container-type: inline-size;
}

.is-responsive-enabled .table-ring,
.is-responsive-enabled .table-ring-grid,
.is-responsive-enabled .table-stage-panel,
.is-responsive-enabled .player-hand-rail {
  transition: padding 0.2s ease, gap 0.2s ease;
}

@media (max-width: 1280px) {
  .is-responsive-enabled .felt-bg {
    padding-inline: clamp(0.75rem, 3vw, 1.5rem);
  }

  .is-responsive-enabled .table-ring {
    padding: clamp(0.75rem, 2.5vw, 1.5rem) clamp(0.75rem, 3vw, 1.75rem) clamp(1.1rem, 3vw, 2.1rem);
  }

  .is-responsive-enabled .table-ring-grid {
    grid-template-columns: minmax(0, 0.95fr) minmax(0, 1.2fr) minmax(0, 0.95fr);
    gap: clamp(0.8rem, 1.8vw, 1.4rem);
  }

  .is-responsive-enabled .table-ring-surface {
    width: min(100%, 440px);
  }
}

@media (max-width: 960px) {
  .is-responsive-enabled .table-ring {
    min-height: clamp(320px, 52vh, 560px);
  }

  .is-responsive-enabled .table-stage-panel {
    max-width: min(100%, 360px);
  }

  .is-responsive-enabled .table-stage-panel-bottom-left {
    transform: none;
  }

  .is-responsive-enabled .player-hand-rail {
    gap: clamp(0.55rem, 1.5vw, 1rem);
    padding: 0.6rem clamp(0.9rem, 3vw, 1.4rem) calc(0.9rem + env(safe-area-inset-bottom));
    box-shadow: inset 0 1px 0 rgba(9, 46, 33, 0.3), 0 12px 22px rgba(2, 10, 7, 0.35);
  }

  .is-responsive-enabled .player-hand-wrap .hand {
    gap: clamp(0.3rem, 1vw, 0.45rem);
  }

  .is-responsive-enabled .kitty-top-pocket {
    min-width: clamp(100px, 30vw, 150px);
  }

  .is-responsive-enabled .card-img,
  .is-responsive-enabled .trick-card-img {
    width: clamp(58px, 18vw, 88px);
    height: clamp(88px, 24vw, 132px);
  }

  .is-responsive-enabled .trick-ring {
    aspect-ratio: 1.25 / 1;
  }

  .is-responsive-enabled .trick-ring-slot {
    gap: 0.25rem;
    padding: 0.2rem 0.35rem;
  }

  .is-responsive-enabled .action-row {
    padding-bottom: calc(0.4rem + env(safe-area-inset-bottom));
  }
}

@media (max-width: 720px) {
  .is-responsive-enabled .table-ring {
    min-height: clamp(300px, 48vh, 520px);
    padding-block: clamp(0.75rem, 2.5vh, 1.4rem) clamp(1rem, 3vh, 1.85rem);
  }

  .is-responsive-enabled .table-ring-grid {
    display: flex;
    flex-direction: column;
  }

  .is-responsive-enabled .table-stage-panel,
  .is-responsive-enabled .table-stage-panel > * {
    max-height: min(45vh, 320px);
  }

  .is-responsive-enabled .table-stage-panel > * {
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-gutter: stable;
    padding-right: clamp(0.5rem, 2vw, 0.9rem);
  }

  .is-responsive-enabled .table-ring-center {
    width: 100%;
    max-width: 360px;
    margin-inline: auto;
  }

  .is-responsive-enabled .table-ring-surface {
    width: 100%;
    max-width: none;
    height: clamp(220px, 52vh, 320px);
    aspect-ratio: auto;
    border-radius: 1.75rem;
    box-shadow: inset 0 0 0 1px rgba(15, 118, 110, 0.18), inset 0 0 60px rgba(15, 118, 110, 0.22);
  }

  .is-responsive-enabled .table-ring-surface::before {
    inset: clamp(7%, 3vh, 11%) clamp(8%, 5vw, 11%);
    border-radius: 1.5rem;
    border-width: 2px;
  }

  .is-responsive-enabled .trick-ring {
    aspect-ratio: 1.15 / 1;
  }

  .is-responsive-enabled .trick-ring-slot-bottom {
    transform: translateY(48%);
  }

  .is-responsive-enabled .trick-ring-slot-top {
    transform: translateY(-48%);
  }

  .is-responsive-enabled .trick-ring-slot-left {
    transform: translateX(-62%);
  }

  .is-responsive-enabled .trick-ring-slot-right {
    transform: translateX(62%);
  }

  .is-responsive-enabled .seat-panel {
    min-width: clamp(124px, 46vw, 188px);
    max-width: min(100%, 208px);
    padding: 0.5rem 0.65rem;
  }

  .is-responsive-enabled .seat-panel-active {
    transform: translateY(-2px);
    box-shadow: 0 10px 18px rgba(14, 116, 144, 0.24);
  }

  .is-responsive-enabled .seat-card-backs {
    min-width: 64px;
    padding: 0.5rem 0.7rem;
  }

  .is-responsive-enabled .kitty-top-pocket {
    align-self: center;
    min-width: clamp(96px, 38vw, 140px);
    padding: 0.5rem 0.65rem 0.75rem;
  }

  .is-responsive-enabled .player-hand-rail {
    flex-direction: column;
    align-items: stretch;
  }

  .is-responsive-enabled .player-hand-wrap,
  .is-responsive-enabled .player-hand-wrap .hand {
    justify-content: center;
  }

  .is-responsive-enabled .action-row {
    position: sticky;
    bottom: 0;
    background: rgba(3, 26, 19, 0.9);
    border-top: 1px solid rgba(94, 234, 212, 0.2);
    padding: 0.65rem clamp(0.9rem, 3vw, 1.3rem) calc(0.85rem + env(safe-area-inset-bottom));
    margin-inline: calc(-1 * clamp(0.9rem, 3vw, 1.3rem));
    box-shadow: 0 -8px 24px rgba(2, 12, 8, 0.45);
    z-index: 5;
  }
}

@media (max-width: 600px) {
  .is-responsive-enabled .table-layout-stage {
    gap: clamp(0.75rem, 3vh, 1.1rem);
  }

  .is-responsive-enabled .felt-bg {
    box-shadow: inset 0 0 0 1px rgba(6, 47, 33, 0.35), 0 14px 28px rgba(4, 17, 12, 0.35);
    backdrop-filter: blur(5px);
  }

  .is-responsive-enabled .table-stage-panel > * {
    box-shadow: 0 8px 18px rgba(4, 17, 12, 0.3);
  }

  .is-responsive-enabled .player-hand-wrap .hand {
    gap: clamp(0.22rem, 0.9vw, 0.35rem);
  }

  .is-responsive-enabled .card-img,
  .is-responsive-enabled .trick-card-img {
    width: clamp(54px, 22vw, 74px);
    height: clamp(82px, 30vw, 112px);
  }

  .is-responsive-enabled .table-stage-panel,
  .is-responsive-enabled .table-stage-panel > * {
    max-height: min(42vh, 280px);
  }
}

@media (max-width: 480px) {
  .is-responsive-enabled .table-ring {
    min-height: clamp(260px, 54vh, 460px);
  }

  .is-responsive-enabled .table-ring-center {
    max-width: 320px;
  }

  .is-responsive-enabled .table-ring-surface {
    height: clamp(200px, 58vw, 280px);
    border-radius: 1.5rem;
  }

  .is-responsive-enabled .table-ring-surface::before {
    inset: clamp(8%, 4vw, 12%);
  }

  .is-responsive-enabled .trick-ring-slot-bottom {
    transform: translateY(42%);
  }

  .is-responsive-enabled .trick-ring-slot-top {
    transform: translateY(-42%);
  }

  .is-responsive-enabled .trick-ring-slot-left {
    transform: translateX(-55%);
  }

  .is-responsive-enabled .trick-ring-slot-right {
    transform: translateX(55%);
  }

  .is-responsive-enabled .seat-panel {
    min-width: clamp(112px, 48vw, 168px);
  }

  .is-responsive-enabled .action-row {
    gap: 0.55rem;
  }
}

@media (max-width: 900px) and (max-height: 520px) {
  .is-responsive-enabled .player-hand-rail {
    position: sticky;
    bottom: 0;
    background: rgba(3, 22, 17, 0.92);
    border-top: 1px solid rgba(94, 234, 212, 0.24);
    backdrop-filter: blur(4px);
    padding-bottom: calc(0.85rem + env(safe-area-inset-bottom));
  }
}

@container (max-width: 420px) {
  .is-responsive-enabled .table-stage-panel > * {
    padding-inline: clamp(0.6rem, 4vw, 0.85rem);
    gap: clamp(0.6rem, 4vw, 0.85rem);
  }

  .is-responsive-enabled .panel-title,
  .is-responsive-enabled .trick-history-title,
  .is-responsive-enabled .scoreboard-title {
    font-size: clamp(0.95rem, 2.8vw, 1.1rem);
  }
}
